<?xml version="1.0" encoding="UTF-8"?>
<!--
    scan: 当此属性设置为true时，配置文件如果发生改变，将会被重新加载，默认值为true。
    scanPeriod: 设置监测配置文件是否有修改的时间间隔，如果没有给出时间单位，默认单位是毫秒。
                当scan为true时，此属性生效。默认的时间间隔为1分钟。
    debug: 当此属性设置为true时，将打印出logback内部日志信息，实时查看logback运行状态。默认值为false。
 -->
<configuration scan="true" scanPeriod="60 seconds" debug="false">

  <property name="LOG_CONTEXT_NAME" value="springbootdemo"/>
  <!--定义日志文件的存储地址 勿在 LogBack 的配置中使用相对路径-->
  <property name="LOG_HOME" value="logs/${LOG_CONTEXT_NAME}"/>

  <!-- 定义日志上下文的名称 -->
  <contextName>${LOG_CONTEXT_NAME}</contextName>
  <!-- 控制台输出 -->
  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
      <!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符-->
      <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n</pattern>
    </encoder>
  </appender>
  <!-- 按照每天生成日志文件，后面的root会输出到这里 -->
  <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
      <!--日志文件输出的文件名-->
      <FileNamePattern>${LOG_HOME}/TestWeb.log.%d{yyyy-MM-dd}.log</FileNamePattern>
      <!--日志文件保留天数-->
      <MaxHistory>30</MaxHistory>
    </rollingPolicy>
    <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
      <!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符-->
      <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n</pattern>
    </encoder>
    <!--日志文件最大的大小-->
    <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
      <MaxFileSize>10MB</MaxFileSize>
    </triggeringPolicy>

  </appender>

  <!-- 自定义name=mylog的输出到这里-->
  <appender name="mylog" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
      <!--日志文件输出的文件名-->
      <FileNamePattern>${LOG_HOME}/mylog.log.%d{yyyy-MM-dd}.log</FileNamePattern>
      <!--日志文件保留天数-->
      <MaxHistory>1</MaxHistory>
    </rollingPolicy>
    <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
      <!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符-->
      <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n</pattern>
    </encoder>
    <!--日志文件最大的大小 默认10MB-->
    <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
      <MaxFileSize>1GB</MaxFileSize>
    </triggeringPolicy>


  </appender>
  <!--错误日志统一输出到这里-->
  <appender name="error" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
      <!--日志文件输出的文件名-->
      <FileNamePattern>${LOG_HOME}/error.log.%d{yyyy-MM-dd}.log</FileNamePattern>
      <!--日志文件保留天数-->
      <MaxHistory>30</MaxHistory>
    </rollingPolicy>
    <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
      <!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符-->
      <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n</pattern>
    </encoder>
    <!--日志文件最大的大小-->
    <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
      <MaxFileSize>10MB</MaxFileSize>
    </triggeringPolicy>
    <!-- 所有error日志都在这里-->
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>ERROR</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
  </appender>


  <!--  日志输出级别 -->
  <!--TRACE\DEBUG\INFO\WARN\ERROR\FATAL\OFF-->
  <root level="INFO">
    <appender-ref ref="STDOUT"/>
    <appender-ref ref="FILE"/>
    <appender-ref ref="error"/>
  </root>
  <!--错误日志会输出一份到error中-->
  <!-- additivity=true会向上传递给上面root再输出一遍-->
  <logger name="pubprice" level="INFO" additivity="false">
    <appender-ref ref="mylog"/>
    <appender-ref ref="error"/>
  </logger>

</configuration>

  <!--<?xml version="1.0" encoding="UTF-8"?>-->
  <!--<configuration scan="true">-->

  <!--  <property name="log.root.level" value="DEBUG"/> &lt;!&ndash; 日志级别 &ndash;&gt;-->
  <!--  <property name="log.other.level" value="DEBUG"/> &lt;!&ndash; 其他日志级别 &ndash;&gt;-->
  <!--  <property name="log.moduleName" value="logback-test-demo"/>  &lt;!&ndash; 模块名称， 影响日志配置名，日志文件名 &ndash;&gt;-->
  <!--  &lt;!&ndash;日志文件的保存路径,首先查找系统属性-Dlog.dir,如果存在就使用其；否则，在当前目录下创建名为logs目录做日志存放的目录 &ndash;&gt;-->
  <!--  <property name="log.base" value="${log.dir:-logs}/${log.moduleName}"/>-->
  <!--  <property name="log.max.size" value="100MB"/> &lt;!&ndash; 日志文件大小,超过这个大小将被压缩 &ndash;&gt;-->

  <!--  &lt;!&ndash;控制台输出 &ndash;&gt;-->
  <!--  <appender name="stdout" class="ch.qos.logback.core.ConsoleAppender">-->
  <!--    <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">-->
  <!--      <Pattern>%date{yyyy-MM-dd HH:mm:ss.SSS} %-5level[%thread]%logger{56}.%method:%L -%msg%n-->
  <!--      </Pattern>-->
  <!--    </encoder>-->
  <!--  </appender>-->

  <!--  &lt;!&ndash; 用来保存输出所有级别的日志 &ndash;&gt;-->
  <!--  <appender name="file.all" class="ch.qos.logback.core.rolling.RollingFileAppender">-->
  <!--    <File>${log.base}/${log.moduleName}.log</File>&lt;!&ndash; 设置日志不超过${log.max.size}时的保存路径，注意如果-->
  <!--              是web项目会保存到Tomcat的bin目录 下 &ndash;&gt;-->
  <!--    &lt;!&ndash; 滚动记录文件，先将日志记录到指定文件，当符合某个条件时，将日志记录到其他文件。 &ndash;&gt;-->
  <!--    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">-->
  <!--      <FileNamePattern>${log.base}/archive/${log.moduleName}_all_%d{yyyy-MM-dd}.%i.log.zip-->
  <!--      </FileNamePattern>-->
  <!--      &lt;!&ndash; 文件输出日志 (文件大小策略进行文件输出，超过指定大小对文件备份) &ndash;&gt;-->
  <!--      <timeBasedFileNamingAndTriggeringPolicy-->
  <!--        class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">-->
  <!--        <maxFileSize>${log.max.size}</maxFileSize>-->
  <!--      </timeBasedFileNamingAndTriggeringPolicy>-->
  <!--    </rollingPolicy>-->
  <!--    &lt;!&ndash; 日志输出的文件的格式 &ndash;&gt;-->
  <!--    <layout class="ch.qos.logback.classic.PatternLayout">-->
  <!--      <pattern>%date{yyyy-MM-dd HH:mm:ss.SSS} %-5level[%thread]%logger{56}.%method:%L -%msg%n-->
  <!--      </pattern>-->
  <!--    </layout>-->
  <!--  </appender>-->

  <!--  &lt;!&ndash; 这也是用来保存输出所有级别的日志 &ndash;&gt;-->
  <!--  <appender name="file.all.other" class="ch.qos.logback.core.rolling.RollingFileAppender">-->
  <!--    <File>${log.base}/${log.moduleName}_other.log</File>-->
  <!--    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">-->
  <!--      <FileNamePattern>${log.base}/archive/${log.moduleName}_other_%d{yyyy-MM-dd}.%i.log.zip-->
  <!--      </FileNamePattern>-->
  <!--      <timeBasedFileNamingAndTriggeringPolicy-->
  <!--        class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">-->
  <!--        <maxFileSize>${log.max.size}</maxFileSize>-->
  <!--      </timeBasedFileNamingAndTriggeringPolicy>-->
  <!--    </rollingPolicy>-->
  <!--    <layout class="ch.qos.logback.classic.PatternLayout">-->
  <!--      <pattern>%date{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] %logger{56}.%method:%L -%msg%n-->
  <!--      </pattern>-->
  <!--    </layout>-->
  <!--  </appender>-->

  <!--  &lt;!&ndash; 只用保存输出error级别的日志 &ndash;&gt;-->
  <!--  <appender name="file.error"-->
  <!--    class="ch.qos.logback.core.rolling.RollingFileAppender">-->
  <!--    <File>${log.base}/${log.moduleName}_err.log</File>-->
  <!--    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">-->
  <!--      <FileNamePattern>${log.base}/archive/${log.moduleName}_err_%d{yyyy-MM-dd}.%i.log.zip-->
  <!--      </FileNamePattern>-->
  <!--      <timeBasedFileNamingAndTriggeringPolicy-->
  <!--        class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">-->
  <!--        <maxFileSize>${log.max.size}</maxFileSize>-->
  <!--      </timeBasedFileNamingAndTriggeringPolicy>-->
  <!--    </rollingPolicy>-->
  <!--    <layout class="ch.qos.logback.classic.PatternLayout">-->
  <!--      <pattern>%date{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread] %logger{56}.%method:%L - %msg%n-->
  <!--      </pattern>-->
  <!--    </layout>-->
  <!--    &lt;!&ndash; 下面为配置只输出error级别的日志 &ndash;&gt;-->
  <!--    <filter class="ch.qos.logback.classic.filter.LevelFilter">-->
  <!--      <level>ERROR</level>-->
  <!--      <onMatch>ACCEPT</onMatch>-->
  <!--      <onMismatch>DENY</onMismatch>-->
  <!--    </filter>-->
  <!--  </appender>-->

  <!--  &lt;!&ndash; 不丢失日志.默认的,如果队列的80%已满,则会丢弃TRACT、DEBUG、INFO级别的日志 &ndash;&gt;-->
  <!--  &lt;!&ndash; 更改默认的队列的深度,该值会影响性能.默认值为256 &ndash;&gt;-->
  <!--  &lt;!&ndash; 添加附加的appender,最多只能添加一个 &ndash;&gt;-->
  <!--  <appender name="file.async" class="ch.qos.logback.classic.AsyncAppender">-->
  <!--    <discardingThreshold>0</discardingThreshold>-->
  <!--    <queueSize>256</queueSize>-->
  <!--    <includeCallerData>true</includeCallerData>-->
  <!--    <appender-ref ref="file.all"/>-->
  <!--  </appender>-->

  <!--  　　&lt;!&ndash; 使用异步来记录其他信息&ndash;&gt;-->
  <!--  <appender name="file.async.other" class="ch.qos.logback.classic.AsyncAppender">-->
  <!--    <discardingThreshold>0</discardingThreshold>-->
  <!--    <queueSize>256</queueSize>-->
  <!--    <includeCallerData>true</includeCallerData>-->
  <!--    <appender-ref ref="file.all.other"/>-->
  <!--  </appender>-->

  <!--  &lt;!&ndash; 为某个包下的所有类的指定Appender 这里也可以指定类名称例如：com.aa.bb.ClassName &ndash;&gt;-->
  <!--  <logger name="com.lin" additivity="false">-->
  <!--    <level value="${log.root.level}"/>-->
  <!--    <appender-ref ref="stdout"/>-->
  <!--    <appender-ref ref="file.async"/>&lt;!&ndash; 即com.lin包下级别为 ${log.root.level}的才会使用file.async来打印 &ndash;&gt;-->
  <!--    <appender-ref ref="file.error"/>-->
  <!--  </logger>-->

  <!--  &lt;!&ndash; root将级别为${log.root.level}及大于${log.root.level}的日志信息交给已经配置好的名为“Console”的appender处理，“Console”appender将信息打印到Console,其它同理 &ndash;&gt;-->
  <!--  <root level="${log.root.level}">-->
  <!--    <appender-ref ref="stdout"/> &lt;!&ndash;  标识这个appender将会添加到这个logger &ndash;&gt;-->
  <!--    <appender-ref ref="file.async.other"/>-->
  <!--    <appender-ref ref="file.error"/>-->
  <!--  </root>-->
  <!--</configuration>-->